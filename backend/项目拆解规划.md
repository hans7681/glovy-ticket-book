# 电影院购票网站项目学习规划

本规划旨在帮助您逐步深入理解该项目的技术实现，从基础概念到具体代码细节。每次对话将聚焦于一个或几个相关的知识点。

## 学习规则与方法

1. **结合实际代码讲解**：每个知识点的讲解将尽可能引用项目中的具体代码实现，通过实例加深理解。
   
2. **代码跳转与关联**：讲解过程中会指明相关代码的具体位置，如文件名、类名和方法名，便于直接在IDE中定位查看。
   
3. **由浅入深**：从基础概念开始，逐步深入到实现细节，帮助建立完整的知识体系。
   
4. **实践与理论结合**：讲解不仅包括"是什么"和"怎么做"，还会解释"为什么这样做"，理解设计思想和决策依据。
   
5. **问题导向学习**：鼓励提出问题，通过解答问题来深化对知识点的理解。

**学习大纲:**

1.  **第一部分：项目概述与环境**
    *   1.1 项目目标与核心功能解读 (`项目需求.md`)
        *   系统三种角色用户分析：普通用户、影院管理员、系统管理员
        *   核心业务场景分析
        *   项目创新点分析
    *   1.2 技术栈分析 (`pom.xml`, `项目进度.md`)
        *   后端技术：Spring Boot、MyBatis、MySQL 分析
        *   前端技术：Vue.js 分析
        *   项目构建与管理工具：Maven 分析
    *   1.3 项目文件结构概览
        *   后端项目结构详解
        *   前端项目结构详解
        *   配置文件分析
    *   1.4 (可选) 本地运行项目
        *   后端环境配置与启动
        *   前端环境配置与启动
        *   数据库配置与初始化

2.  **第二部分：核心数据模型**
    *   2.1 数据库设计详解 (`数据库设计.md`)
        *   用户、角色与权限：user 表详解
        *   电影相关：movie, movie_type, movie_movie_type, credit 表详解
        *   影院与影厅：cinema, room 表详解
        *   场次与排片：screening 表详解
        *   订单与支付：t_order, order_seat 表详解
        *   收藏与评分：favorite, rating 表详解
        *   公告：announcement 表详解
        *   座位锁定机制：seat_lock 表详解
    *   2.2 实体关系梳理
        *   核心实体识别
        *   实体关系图分析
        *   业务状态流转分析

3.  **第三部分：后端 - 基础与认证**
    *   3.1 Spring Boot 核心概念与项目配置
        *   框架基础概念：IoC、DI、AOP
        *   application.properties/yml 配置详解
        *   项目依赖分析（pom.xml）
    *   3.2 项目分层架构
        *   Controller 层：定义 API 接口
        *   Service 层：实现业务逻辑
        *   Mapper/DAO 层：数据访问
        *   Model/Entity 层：数据模型
        *   DTO/VO：数据传输对象
    *   3.3 用户认证流程
        *   登录接口实现（/api/auth/login）
        *   注册接口实现（/api/auth/register）
        *   密码加密与验证
    *   3.4 密码安全与 JWT/Session
        *   JWT 工作原理
        *   Token 生成与验证
        *   用户会话管理
    *   3.5 权限控制 (Spring Security)
        *   基于角色的访问控制（RBAC）
        *   Spring Security 配置
        *   自定义权限注解

4.  **第四部分：后端 - 核心业务模块**
    *   4.1 电影模块
        *   电影列表 API（/api/movies）
        *   电影详情 API（/api/movies/{id}）
        *   电影类型管理
        *   电影筛选与搜索
    *   4.2 影院与影厅模块
        *   影院管理 API（/api/cinemas）
        *   影院入驻申请流程
        *   影厅 CRUD 操作
        *   影院审批流程
    *   4.3 场次模块
        *   场次管理 API（/api/screenings）
        *   排片申请与审批流程
        *   根据电影或影院查询场次
        *   场次状态管理
    *   4.4 订单模块
        *   订单创建 API（/api/orders）
        *   订单查询与管理
        *   订单状态流转
        *   订单冗余字段维护

5.  **第五部分：后端 - 核心流程与高级功能**
    *   5.1 在线选座流程
        *   座位图获取 API（/api/screenings/{id}/seats）
        *   座位锁定 API（/api/seats/lock）
        *   座位解锁（取消选择）
        *   并发控制与锁超时处理
    *   5.2 购票下单流程
        *   订单创建逻辑
        *   座位锁定转订单
        *   订单价格计算
        *   库存（座位）一致性保证
    *   5.3 支付流程与回调处理
        *   模拟支付接口
        *   支付宝沙箱集成
        *   支付回调处理
        *   订单状态更新
    *   5.4 订单超时自动取消
        *   定时任务实现
        *   使用 Spring 的 @Scheduled
        *   分布式锁考虑
        *   座位资源释放
    *   5.5 收藏与评分功能
        *   电影收藏 API
        *   电影评分与评论 API
        *   电影平均分计算逻辑
        *   相关表数据维护
    *   5.6 数据统计与排行榜
        *   票房统计接口
        *   按评分排行榜
        *   热门电影排行
        *   数据聚合与缓存策略

6.  **第六部分：API 设计与交互**
    *   6.1 RESTful API 风格解读
        *   REST 原则解析
        *   HTTP 方法语义（GET, POST, PUT, DELETE）
        *   URL 设计最佳实践
        *   状态码使用规范
    *   6.2 Swagger/API 文档使用
        *   Swagger 配置与使用
        *   API 文档自动生成
        *   在线 API 调试
        *   接口文档规范
    *   6.3 关键接口分析
        *   用户和认证接口（/api/auth/*, /api/profile）
        *   电影相关接口（/api/movies/*, /api/movie-types/*）
        *   影院与影厅接口（/api/cinemas/*, /api/rooms/*）
        *   场次和选座接口（/api/screenings/*, /api/seats/*）
        *   订单和支付接口（/api/orders/*, /api/payment/*）
        *   其他功能接口（收藏、评分、公告等）

7.  **第七部分：前端解析**
    *   7.1 前端技术栈与框架
        *   Vue.js 基础概念
        *   Vite 构建工具
        *   状态管理（Vuex/Pinia）
        *   路由管理（Vue Router）
    *   7.2 前端项目结构与路由
        *   项目文件组织
        *   路由配置
        *   组件设计
        *   静态资源管理
    *   7.3 核心页面组件分析
        *   首页与公共组件（Header、Footer）
        *   用户中心页面（登录、注册、个人信息）
        *   电影列表与详情页
        *   在线选座页面实现
        *   订单与支付页面
        *   后台管理页面组件
    *   7.4 前后端数据交互
        *   Axios 请求封装
        *   API 调用方式
        *   响应处理与错误处理
        *   数据加载状态管理
        *   表单验证实现

8.  **第八部分：部署与总结**
    *   8.1 项目构建与打包
        *   Maven 构建配置
        *   资源文件处理
        *   前端构建优化
        *   环境变量管理
    *   8.2 部署方式概述
        *   应用服务器部署（Tomcat）
        *   容器化部署（Docker）
        *   前后端分离部署策略
        *   数据库备份与恢复
    *   8.3 项目总结与回顾
        *   架构设计要点
        *   性能优化策略
        *   安全性考虑
        *   扩展性与可维护性
        *   项目亮点与改进空间

---

**下一步:** 我们已完成第一部分（项目概述与环境）和第二部分（核心数据模型）的学习。接下来我们将进入**第三部分：后端 - 基础与认证**，开始更深入地了解后端代码实现。
